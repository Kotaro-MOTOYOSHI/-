%#####################################################################
\chapter{関連技術}
%#####################################################################

% 森定さんの内容
\begin{comment}
　近年，大学や企業，教育機関で利用されているネットワークシミュレータとして非常に数多くのものが存在するが，それぞれ使用する用途に応じた特徴がある．代表的なネットワークシミュレータとして，ns-2（Network Simulator version 2），ns-3（Network Simulator version 3），GloMoSim（Global Mobile Information SystemSimulator），Qualnet，OPNET Modeler，Scenargie などがあるが\cite{Qualnet1}，本研究では2.1
節に述べるような理由からns-3 を選択する．選択したns-3 を用いて性能評価を行っていくが，シミュレータでネットワークを構築する際やパラメータの設定を行う際には，ネットワークに関する知識が必要不可欠となってくる．その後，シミュレータで構築したネットワークの性能を評価する際，2.3 節で述べるQoS・QoE の考え方が重要となってくる．

本節では，2.1 節で上記シミュレータの説明と比較を行い本研究に適したシミュレータを選択する．2.2 節ではシミュレータ上でネットワークを構築する際に必要となるネットワーク技術について説明する．2.3 節では，性能評価量とQoS・QoE について説明する．

\section{シミュレータの比較}

\subsubsection{ns-2（Network Simulator version 2）}

ns-2 とは，カリフォルニア大学バークレー校（UCB），LBNL，XeroxPARC，および，USC / ISI によるVINT（VirtualInterNetworkTestbed）プロジェクトで開発された離散イベント型のネットワークシミュレータである．オープンソースのフリーソフトウェアであること，無線通信をモデル化したモジュールが利用できるということから，アドホックネットワーク等の無線通信ネットワークのシミュレーションも行うことが可能．
ns-2 では，シミュレーションのためのスケジューラ，ノードやデバイスを表現したオブジェクトの管理，ネットワークプロトコルの実装部分はC ++言語で記述されており，
それらを使ったシミュレーションシナリオを記述する部分はOTcl（ObjectTcl）言語を用いる事もできる．
C ++言語はコンパイラ型であり，実行速度は速いがコード変更の度にコンパイルが必要なため主に処理負荷の重い部分に採用されている．
一方，OTcl 言語はインタプリタ型であり，実行速度は遅いが変更後のコンパイルが不要なためシナリオ記述語として採用されている．
ns-2 において新しいプロトコルを導入する場合は主としてC ++言語を用い，ネットワークトポロジやパラメータの設定にはOTcl 言語を用いる．従ってユーザは2つの語を習得しなければならない．

ns-2では，移動体の位置やパケットの物理層における伝播，ネットワークプロトコルスタックにおける受理および棄却など多くの観測結果をトレースファイルとして出力することができる．
トレースファイルにはパケットサイズ，イベントの発生時刻，データリンク層，ネットワーク層，トランスポート層におけるヘッダ情報，キューの状態などが記録されるため，そのサイズは巨大なものとなる．
たとえば，2 つのノードが関係する120 秒のMobile IP シミュレーションを実行するとそこで生成されるトレースファイルは100MB を超える．Pentiumクライアントで実行したとすると，終了までに45分以上かかるとされており，これはns-2の大きな欠点であった．


\subsubsection{ns-3（Network Simulator version 3）}

ns-3 はns-2の後継として開発された独自のガベージコレクタを含む改善されたオブジェクト管理手法．C++自身のポリモーフィズム機構により，柔軟なクラスの再利用機構，C++のみで完結する開発環境による高速化，
オプショナルなPythonバインディングの提供，GraphvizベースのPyvizライブラリによる可視化等を含み，特にメモリ管理の改善により大規模なネットワークのシミュレーションを可能にしている．
これに加え後述するDCE（DirectCodeExecution）によりリアルタイムシミュレーションも可能である\cite{ns-3}．
主にプロトコルや大規模システム環境の研究を行う研究者や教育者向けに開発された離散イベント型ネットワークシミュレータである．オープンソースのフリーソフトウェアであること，近年サポートされるサービス/プロトコルが充実してきていること（例：トランスポート層のIPv6 サポート，WiMAXやLTE，OpenFlow 対応）などから，近年活躍の場が広がってきている．ns-3 では主にC ++と簡易スクリプト言語であるPython を使用できる.
さらに，トレースの出力も柔軟になっており，たとえば，ns-3 では受信パケットをUNIX 系OS でのパケット・キャプチャ用ライブラリであるlibpcap 形式で出力するため，Wireshark やtcpdump 等のツールを使用することができる．tcpdump とは，パケット解析をコマンドライン操作により行うツール，Wiresharkとは，パケットの解析をGUIベースで行うツールのことである．これらにより，パケット参照やトレース結果を基にしたアニメーション表示が可能となる．


\subsubsection{DCE（DirectCodeExecution）}

DCEはns-3に用意されている外部コード実行モジュールである．これは，自身が新たに開発したルーチングプロトコルや，アプリケーションプロトコルをns3上でシミュレートするために用いられる\cite{dce}．
これによりそれ自体独立して使われる本物の経路制御プログラムやネットワークアプリケーションをns-3の支配下で複数動かすことができる．
サポートしている機能としては，C／C++アプリケーション，LINUXカーネルに実装したネットワークプロトコルを使用したシミュレーション（IPv4／IPv6，TCP／UDP／DCCP等）やネットワークスタックの分散，
ノードごとのSyslog／stdout／stderrのファイル出力機能をサポートしている．
本研究では，実環境により近付けるためルータにはUNIX用ルーチングソフトウェアであるquaggaデーモンを利用し，ルーチングを行う．quaggaデーモンの利用に関しては既にDCEで動作させることが可能か確認されている\cite{dce}．


\subsubsection{quagga}
quaggaは石黒邦宏が開発したルーチングソフトウェアGNU zebraの派生ソフトウェア．FreeBSD，NetBSD，Linux，SolarisなどのUNIXで動作し，OSPFv2，OSPFv3，RIPv1，RIPv2，RIPng，BGP-4等のルーチングプロトコルが実装されている\cite{quagga}．
本来はquaggaをインストールする事により，PCをソフトウェアルータとして動作させることが可能になる．本研究では，このうちのOSPFv2についてのルーチングプロトコルを利用し，L3スイッチの動作の表現を行う．

\subsubsection{GloMoSim(Global Mobile Information System Simulator)}

GloMoSim とは，カリフォルニア大学ロサンゼルス校(UCLA) において無線ネットワーク環境を想定して開発された離散イベント型のシミュレータである．対応しているOS はUNIX，Linux，Windows である．ソースコードは，UCLA で開発されたC 言語に基づく並列シミュレーションのための言語Parsec(Parallel simulation environmentfor complex systems) で記述・実装されている．端末数が非常に多い環境においてもシミュレータの並列処理によって問題なく動作させることができるのが特徴であり，高いスケーラビリティを持っているといえる．評価環境，トラフィックの生成，ネットワークプロトコルに関するパラメータは環境設定ファイルに記述し，シミュレーション終了後の評価結果は数値データとして出力される．

様々なプロトコルをレイヤ構造として持ちレイヤごとにライブラリを選択できる点，様々なAPI が用意されているため異なるレイヤ間での処理の受け渡しを円滑に行うこともできる点，Java で実装された視覚化ツールを用いた評価環境の確認，シミュレーションの一時停止と再開，パケットの伝播状態のアニメーション表示が可能な点が利点である．一方，Java を用いたアニメーションに関しては大雑把なところがあるという点や各ノードの精密なトレースができないという点が欠点である．


\subsubsection{Qualnet}

Qualnetとは，GloMoSimをベースにSNT（Scable Network Technologys,ink）社が開発を行っている商用ネットワークシミュレータである．高速で大規模なネットワークシミュレーションが可能で，導入が容易，利用マニュアルが充実している，GUIによる設定の柔軟性で優れているという点に加えて既存のシミュレータに比べて特に無線環境の再現性が高い利点がある．

欠点としては，シミュレーション速度を高速化する目的でログは結果を統計処理した値のみしか出力されない，そのため標準の解析ツールでは統計値を棒グラフで出力する事しかできない．より詳細な解析を行うためには専用の解析ツールを作成しなければならないという点がある．
加えてこのシミュレータが公開されてからの年月が浅いため，ログ解析ツールが充実していないという点も欠点である\cite{Qualnet1}．


\subsubsection{OPNET Modeler}

OPNET Modeler とは，マサチューセッツ工科大学（MIT）で開発された商用ネットワークシミュレータである．OPNETModeler では，通信ネットワーク，デバイス，および，プロトコルのモデリングやシミュレーション実験を行うことができ，現在IEEE の標準化委員会で共通プラットフォームとして採用されている．OPNET Modeler は，ネットワークトポロジを階層的に関連付ける以下のエディタ群から構成される．

\begin{itemize}
 \item 端末とリンクから成る通信ネットワークのトポロジを表示するネットワークエディタ
 \item ネットワークデバイスやシステム構造をモジュールとして再現するノードエディタ
 \item 様々なプロトコルやアプリケーションが実装できるプロセスエディタ
\end{itemize}


利点として，各エディタでは豊富なライブラリによって多くのモデルやプロトコルが提供されるため開発作業を簡素化できる点，
シミュレーション結果をグラフ表示し，パケットの伝播状態などをシミュレーションの実行中や終了後にアニメーション表示できる点，OPNET Modelerに専用の無線通信モジュールを組み込むことで，無線ネットワークを想定したシミュレーションを実行できる点が挙げられる．
一方，欠点として，シミュレーション実行中に評価環境の設定を変更できない点や，評価環境の構築に膨大な手間がかかる点が挙げられる．
% \textgt{OMNeT ++ （Objective Modeler Network Testbed in C ++ ）}

% OMNeT ++とは，AndrasVarga 等によって開発されたオブジェクト指向の離散イベント型のネットワークシミュレータである．対応するOS は，Unix 系OS とWindowsである．利点として，ユーザがソースコードの修正やシステムのリビルドを行わなくても評価に必要なパラメータを変更するだけで様々な環境でのシミュレーション実験が行える点，C ++のみで実装されているためシミュレーションのデバッグや拡張が容易に行える点，リアルタイムにシミュレーション状況をアニメーション表示できるため実装したプロトコルの動作把握やデバッグ処理が容易になる点が挙げられる．一方，欠点として，シミュレーション実行中にパラメータ設定を変更できない点，無線環境を想定していないという点が挙げられる．\\


\subsubsection{Scenargie}

Scenagieは，C++で開発された商用ネットワークシミュレータである．IEEE802.11a／g，LTE，Aloha，WAVE，GeoNet，T109といったシステムモデルをサポートし，MAC，PHY，電波伝搬を含む精細なパケットレベルの無線通信シミュレーションが行える事が利点である．
有線ネットワークに関するモデルが限定的で，対象となるモデルのルーチングアルゴリズムを模擬する事が困難であるという欠点がある．\\


\subsubsection{シミュレータの選択}

本研究におけるシミュレータ選定基準と6 つのネットワークシミュレータとの対応を表 \ref{シミュレータ比較} にを示す．表を見て分かる通り，6つの条件を全て満たすシミュレータとして本研究ではns-3 を採用し，シミュレーションを行うこととする．\\

\begin{table}[htb]
\begin{center}
\caption{シミュレータの選択}
\label{シミュレータ比較}
\scalebox{0.7}[0.9]{
\begin{tabular}{c|c|c|c|c|c|c}
\hline
\hline
選定基準 & 　ns-2　 & 　ns-3　 & GloMoSim & Qualnet & OPNET & Scenargie \\
\hline 
大規模ネットワーク環境をサポート & ○ & ○ & ○ & ○ & ○ & ○ \\
有線・無線環境をサポート & ○ & ○ & △ & △ & △ & × \\
マイナー言語の不使用 & × & ○ & ○ & ○ & × & ○ \\
パケットキャプチャ可能 & ○ & ○ & △ & △ & ○ & ○ \\
ビジュアライズ可能 & ○ & ○ & ○ & × & × & ○ \\
無料シミュレータ & ○ & ○ & △ & × & ○ & × \\
\hline
\end{tabular}
}
\end{center}
\end{table}

\section{シミュレーションを行う上で必須となるネットワーク技術}

シミュレータ上でネットワークを構築する際，必要となるネットワーク技術について説明する．

\subsection{IPアドレスとアドレッシング}


IP（Internet Protocol）アドレスとは，インターネットやLAN などのIP ネットワークに接続されたコンピュータなどに割り振られる識別番号のことであり，RFC791 に記載されている．IPアドレスは，計算機の処理が2進数で行われることから32ビットの整数値で表される．しかし，人間にとって2進数をそのまま理解する事は難しいため，通常は32ビットの整数値を8ビットずつの4つに分割した10進数（0～255）の組み合わせで表現する．32ビットのIPアドレスはネットワーク部とホスト部の2つの要素により構成されており，ネットワーク部は各ホストが所属するネットワーク，ホスト部はネットワークに所属する各ホストを表す．IPアドレスにはサブネットマスクと呼ばれるIPアドレスとは別の数値も記述され，ネットワーク部とホスト部の区切りを指定している．例えば，「192.168.2.1/24」のIP アドレスにおいて「/24」はサブネットマスクと呼ばれており，ネットワーク部のビット数を表している．そのため，今回の場合「192.168.2」がネットワーク部，「1」がホスト部となる．

IPアドレスは元々クラスA，クラスB，クラスC，クラスD，クラスE の5つのアドレスクラスに分類されていたが，現在は使用されていない．しかし文献等ではまだ一般的である\cite{kyoukasyo}ので解説を行う．これらのクラスでは，各クラスにおいて使用できるアドレス範囲，用途，使用可能なホストアドレス数などが定義されている．表 \ref{各クラスの特徴} に，各クラスにおける特徴を挙げる\cite{kyoukasyo}．



\begin{table}[tb]
\begin{center}
\caption{各クラスの特徴}
\label{各クラスの特徴}
\scalebox{0.7}[0.9]{
\begin{tabular}{c|c|c|c|c} 
\hline \hline
クラス & アドレス範囲 & ネットワーク・ホスト部 & 用途 & ホストアドレス数 \\ 
\hline 
クラスA & 0.0.0.0 ～ 127.255.255.255 & 8bit・24bit & 大規模ネットワーク & 16,777,214個 \\
クラスB & 128.0.0.0 ～ 191.255.255.255 & 16it・16bit & 中規模ネットワーク & 65534個 \\
クラスC & 192.0.0.0 ～ 223.255.255.255 & 24bit・8bit & 小規模ネットワーク & 254個 \\
クラスD & 224.0.0.0 ～ 239.255.255.255 & 下位28bitがグループID & マルチキャスト用 &  \\
クラスE & 240.0.0.0 ～ 255.255.255.255 & 未定義 & 実験用 &  \\
\hline
\end{tabular}
}
\end{center}
\end{table}


\subsection{MACアドレス}

MACアドレス（Media Access Control Address）とは，データリンクに接続されているノードを識別するために利用される．
個々のネットワーク機器を識別するためIEEE（Institute of Electrical and ElectronicEngineers）によってLANカードなどに割り当てられる物理アドレスである．一般的には，「04-A3-43-5F-43-23」や「32:61:3C:4 E:B6:05」のように12 桁の16 進数で表現され，前から3～24 ビット（6 桁）目まではベンダーを識別するID，後半24 ビット（6 桁）は機種IDを表し，その機器を表現している．
原則としてMACアドレスは一つの機器に対し一つだけであり，かつ同じMACアドレスを持つ他のネットワーク機器は存在しない．この事を利用し，MACアドレスを用いて認証を行うような研究もおこなわれている\cite{MAC}．
2～24ビット目までがベンダーのIDを示していることを利用し，複数のベンダーの機器を利用しているネットワーク環境においてトラブルが発生した場合，フレームの送信元のMACアドレスからその原因特定ができる場合がある．
IP アドレスが第3層（ネットワーク層）のアドレスであるのに対して，MAC は第2 層（データリンク層）のアドレスに当たる．そのため，MAC アドレスはエンド-エンド間の通信には使用されず，主に１つのセグメント内での通信に使用される\cite{kyoukasyo2}．


\subsection{TCPとUDP}

TCP（Transmission Control Protocol）とは，あらかじめ通信相手とコネクションを確立して通信を行う高信頼性プロトコルである．
通信前の接続相手の確認やデータ到着の確認，フロー制御，データの重複や抜けの検出などを行うことで高い信頼性を確保しているが，その分処理時間がかかるという特徴をもつ．
そのため，リアルタイム性の求められないファイル転送に使用される．\\
UDP（UserDatagramProtocol）とは，コネクションの確立を行わない，順序制御やフロー制御を行わずに通信を行うプロトコルである．
TCPのように相手にデータが到着したかどうかの確認，フロー制御やデータの重複・抜けの検出を行わない．つまりその分高速にデータ転送可能であるという特徴をもつ．
そのため，リアルタイム性が求められ，完全なデータを受信する必要がない場合，つまり音声通話やビデオ会議，ストリーミング再生などに使用される\cite{kyoukasyo}\cite{kyoukasyo2}．

\subsection{L2スイッチ}

スイッチとは，同一ネットワーク間の接続を行うレイヤ2 のネットワークデバイスである．
受信したフレームヘッダに書かれた宛先MAC アドレスと自身の持つテーブルを基に配送される．
使用するテーブルは「MAC アドレステーブル」と呼ばれ，テーブルには宛先MACアドレス，ポート番号，VLAN番号，学習方法が関連付けられている．
テーブルを参照して，該当する端末が接続されているポートにのみフレームを高速に送信するため，関係のないポートには不要なフレームを送信せずに済む．
これにより，余分なトラヒックを低減させることができる．
さらに，HUB のようにただ電気的に電送信号中継を行うのではなく，受信したフレームの送信先ポートを決定するためにフレームをバッファに格納するという機能を持っている．
この機能を利用して，フレーム単位で破損が発見できるデータに関して破棄を行うことで，無意味なデータの送信を減らす事ができ，この機能を用いてネットワークの高速化を行う\cite{kyoukasyo2}．
加えてデータを一時的に格納する事で通信速度の異なるポート間（例10Mbps ポート，100Mbps ポート間）の通信や全二重通信が可能となる．以下に，基本的な処理の流れを示す．

\begin{enumerate}
 \item スイッチに到着したフレームは物理レイヤからデータリンクレイヤに処理が渡され，スイッチはヘッダに書かれた宛先MAC アドレスを参照する．
 \item もし，宛先MACアドレスをテーブルに学習していた場合，テーブルを参照し該当のポートを決定する．宛先が不明の場合，受信したフレームの送信元MACアドレスと受信ポートの対応をテーブルに登録する（送信ポート未決定）．
 \item 該当のポートが決定している場合，そのポートからフレームを送信する．決定していない場合（宛先不明の場合），受信ポートを除く全ポートからフレームを送信する．
\end{enumerate}

\subsection{L3スイッチ（ルータ）}

L3スイッチ（ルータ）とは，異なるネットワーク間の接続を行うレイヤ3のネットワークデバイスのことである．
受信したパケットのヘッダに書かれた宛先IPアドレスと自身の持つテーブルを基にパケットを配送する．
この処理をルーチング，あるいはフォワーディング処理という．配送を行うための送信先の判断に使用するテーブルは，「ルーチングテーブル」と呼ばれ，テーブルには宛先ネットワーク，送信インタフェース，ネクストホップ，メトリック値などが関連付けられている．
このルーチングテーブルの作成を操作する事により，管理者の意図する伝送経路でパケット配送することやルータ自身が経路を自律的に選択制御して適切に配送することが可能となる．以下に基本的な処理の流れを示す\cite{kyoukasyo}\cite{kyoukasyo2}．

\begin{enumerate}
 \item ルータに到着したパケットは，データリンクレイヤからネットワークレイヤに処理が渡され，ルータはヘッダに書かれたIP アドレスを参照する．
 \item もし，アドレスが自分自身宛であればトランスポートレイヤ以上の処理に委ね，ルータ内部に取り込む．宛先がそれ以外の場合，ルーチングテーブルの検索処理を行い配送先のポートを決定する．宛先不明の場合は破棄となる．
 \item 配送ポート決定後，パケットの次の転送先データリンク（MAC）アドレスを解決するARP やIP パケットの生存時間を管理するTTL の減算などの処理を介して該当ポートから配送される． 　
\end{enumerate}

ルーチングテーブルの作成方法には管理者が手作業で作成する方法とルーチングプロトコルと呼ばれる制御機能を用いて自動で行う方法があるが，本研究では，quaggaデーモンを用いて作成する．\\


\subsection{ルーチングアルゴリズム}

送信元と宛先の間に複数の経路がある場合，経路を選択しなければならない．あらかじめルーチングテーブルを作成しておき，テーブルに従ったフォワーディング処理を行うことで経路を選択する事となるが，そのルーチングテーブルの作成に使用するのがルーチングアルゴリズムである．
このルーチングアルゴリズムには，確実に宛先まで送信できる正確性，特定のルータが故障した場合でもネットワーク全体が動作を停止してしまうことを防ぐ対故障性，
一定以上の要求に対応できる安定性，特定の端末が通信不可能となってしまう事を防ぐ公平性，効率よくネットワークを利用できる最適性を考慮してルーチングを行う必要がある\cite{kyoukasyo}．
本研究では，L3スイッチはOSPFというルーチングアルゴリズムを利用する．


\subsubsection{OSPF（Open Shortest Path First）}

TCP／IPにおけるルーチングアルゴリズムの一種で，1990年に標準となった．RFC2328に記載されている．
特徴は，アルゴリズムが公開されていること，物理的距離や遅延等のさまざまな距離の基準に対応していること，
ネットワークの変化に対応するため，動的なアルゴリズムであること，最適な経路だけではなく経路を分散させることで負荷を軽減させること，階層的なシステムをサポートすることである．
階層的なシステムというのは，インターネット等の大規模なネットワークではL3スイッチが全体を把握する事が不可能であったため，LAN等小規模なネットワークのみを一つのエリアとみなし，その中だけを把握するだけで動作するよう設計された．
各エリアはバックボーンと呼ばれる階層0のエリアに接続されており，その他のエリアとはバックボーンを介する事によって通信を行う．
階層的なシステムによりエリアに区分されたL3スイッチは，そのエリア内とバックボーンへの接続方法を把握するだけで，バックボーンに接続されている全てのネットワークとの通信を行うことが可能となる．
バックボーンに接続していないが，複数のエリアに接続しているL3スイッチは，そのエリア間に限ってはバックボーンに接続されたL3スイッチとしての動作が要求される．
ひとつのエリア内では，各L3スイッチは同じ最短経路アルゴリズムで動作する．
OSPFにおけるL3スイッチは3種類に分かれており，一つのエリア内にのみ完全に含まれている内部L3スイッチもの，二つ以上のエリアに接続されている領域ボーダL3スイッチ，バックボーン上にあるバックボーンL3スイッチがある\cite{kyoukasyo}．
L3スイッチが最短経路や接続がされているかを把握するために5つのメッセージが用意されている．

\begin{description}
 \item[HELLOメッセージ]\mbox{}\\
隣接ルータの把握に用いる．
 \item[リンク状態更新]\mbox{}\\
送信元のコストを隣接ルータに伝える．
 \item[リンク状態確認]\mbox{}\\
リンク状態更新メッセージの確認．
 \item[データベース記述]\mbox{}\\
送信元が保持している更新情報の告知．
 \item[リンク状態要求]\mbox{}\\
パートナー（隣接L3スイッチ）へ情報提供を求める．  
\end{description} 

\begin{table}[bt]
\begin{center}
\caption{ルータとスイッチの比較}
\label{ルータとスイッチの比較}
\scalebox{0.7}[0.9]{
\begin{tabular}{c|c|c} 
\hline \hline
比較基準 & L3スイッチ & L2スイッチ \\ 
\hline 
レイヤ & ネットワーク層（レイヤ3） & データリンク層（レイヤ2） \\
参照部分 & 宛先IP・MACアドレス & 宛先MACアドレス \\
ブロードキャストドメイン & 分割可能 & 分割不可能 \\
処理 & ソフトウェア & ハードウェア \\
インタフェースへのIP割り当て & 可能 & 不可能 \\
\hline
\end{tabular}
}
\end{center}
\end{table}

表 \ref{ルータとスイッチの比較} にルータとスイッチの比較を示す．


\subsection{イーサネット規格}

イーサネットには，使用するケーブルの種類，ネットワークのトポロジによっていくつかの規格がある．伝送媒体であるケーブルには大きく分けて4種類ほどの区分があり，それぞれに伝搬速度や信号の距離による減衰等の物理的な特性が存在する．
表 \ref{Eathenet規格と特徴} に他の規格に関して述べる\cite{kyoukasyo}． なお，表におけるUTPケーブルは非シールドより対線（Unshielded Twisted Pair cable），STPケーブルはシールドより対線（Shielded Twist Pair cable）の事を指す．

\begin{table}[tb]
\begin{center}
\caption{Eathenet規格と特徴}
\label{Eathenet規格と特徴}
\begin{tabular}{c|c|c|c} 
\hline \hline
規格名 & IEEE表記 & 伝送媒体（ケーブル） & 最大長 \\ 
\hline 
10Base5 & IEEE802.3 & 同軸ケーブル & 500m \\
10Base2 & IEEE802.3a & 同軸ケーブル & 185m \\
10Base-T & IEEE802.3i & UTPケーブル（カテゴリ3～5） & 100m \\
10Base-F & IEEE802.3j & 光ケーブル & 2000m \\
100Base-T4 & IEEE802.3u & UTPケーブル（カテゴリ3） & 100m \\
100Base-TX & IEEE802.3u & UTPケーブル（カテゴリ5） & 100m \\
100Base-FX & IEEE802.3u & 光ファイバ & 2000m \\
1000Base-SX & IEEE802.3z & 光ファイバ & 550m \\
1000Base-LX & IEEE802.3z & 光ファイバ & 5000m \\
1000Base-CX & IEEE802.3z & STPケーブル2本 & 25m \\
1000Base-T & IEEE802.3ab & UTPケーブル4本（カテゴリ5） & 100m \\
\hline
\end{tabular}
\end{center}
\end{table}

\subsection{無線LAN}

無線LANとは，LAN ケーブルを必要としない，つまり電波や赤外線，レーザー光線等を利用した通信技術のことである．
一般的には電波を用いて通信を行う場合を指す．この場合の構成要素としては，アクセスポイントと無線LAN アダプタがある．
アクセスポイントは，無線LANクライアントを有線LANに接続したり，無線LANクライアント同士を相互接続したりする機器のことである．
無線LAN アダプタは，有線LAN におけるNICに相当するものであり無線LAN カードとも呼ばれる．
無線LANアダプタを追加した無線LANクライアントは，アクセスポイントと電波送受信することで他の無線クライアントや有線LAN 上のクライアントとの通信が可能となる．
なお，無線LAN とアクセスポイント同士は同じチャネルを設定する必要がある．チャネルとは，データの送受信に必要な周波数の幅のことを意味する．表\ref{有線LANと無線LANの比較} に有線LAN と無線LAN の比較を示す\cite{kyoukasyo2}．\\

\begin{table}[hbt]
\begin{center}
\caption{有線LANと無線LANの比較}
\label{有線LANと無線LANの比較}
\begin{tabular}{c|c|c} 
\hline \hline
比較項目 & 有線LAN & 無線LAN \\ 
\hline 
標準規格 & IEEE802.3 & IEEE802.11 \\
伝送媒体 & ケーブル & 電波 \\
アクセス制御 & CSMA/CD方式 & CSMA/CA方式 \\
LAN通信で使用するアドレス & MACアドレス & MACアドレス \\
PCで必要とするNIC & 有線LANカード & 無線LANカード \\
PCの接続先となる機器 & ハブ・スイッチ & アクセスポイント \\
\hline
\end{tabular}
\end{center}
\end{table}

% \textgt{無線LANの通信方式}

% 無線LAN の通信方式には大きく２つのモードがある．１つは，アドホックモードである．これは，アクセスポイントを介さずに無線機器同士が直接通信を行うモードである．アクセスポイントが不要であるため手軽に無線LAN 通信を利用できるという利点がある．一方で，有線LAN と相互接続できず，セキュリティを確保するのが難しいという欠点もある．例として，無線LAN カードを搭載したニンテンドーDS やPSP 対戦で使用される．もう１つは，インフラストラクチャモードである．これは，アクセスポイントを介して無線LAN 機器同士が通信を行うモードである．有線LAN とブリッジングすることができるため企業内において無線LAN を導入する場合，一般的にこのモードが使用される．\\


% \textgt{無線LANの伝送規格}

% 無線LAN には，IEEE802.11b/a/g など複数の規格がある．これらの規格に応じて，変調方式，伝送速度，周波数，同時使用チャネル数などが異なる．表2.6 に比較を示す．

% \begin{table}[b]
% \begin{center}
% \caption{無線LANの伝送規格}
% \label{無線LANの伝送規格}
% \scalebox{0.7}[0.9]{
% \begin{tabular}{c|c|c|c|c|c} 
% \hline \hline
% 無線LANの伝送規格 & IEEE802.11b & IEEE802.11a & IEEE802.11g & IEEE802.11n & 802.11ac \\ 
% \hline 
% 周波数帯域 & 2.4GHz帯 & 5GHz帯 & 2.4GHz帯 & 2.4/5GHz帯 & 5GHz帯 \\
% 最大伝送速度 & 11Mbps & 54Mbps & 54Mbps & 600Mbps & 6.93Gbps \\
% 同時使用チャネル数 & 4 & 19 & 3 & 2/9 & 2～19 \\
% 利用可能チャネル数 & 14 & 19 & 3 & 14/19 & 19 \\
% チャネル幅 & 20MHz & 20MHz & 20MHz & 20/40MHz & 80/160MHz \\
% 変調方式 & DSSS & OFDM & DSSS/OFDM & OFDM \\
% 屋外での利用 & ○ & × & ○ & △ & ○ \\
% \hline
% \end{tabular}
% }
% \end{center}
% \end{table}

% \textgt{セル}

% 無線において，セルとはアクセスポイントから送られる電波が届く範囲のことである．無線LAN クライアントはセル内であればどこでも快適に通信できるわけではなく，アクセスポイントから離れるほど信号が弱くなりデータレートが低下する．このように無線LAN では，電波信号の強度により伝送速度が異なるため無線LANクライアントはフォールバック機能を使用する．このフォールバック機能により，信号強度に応じて伝送速度を自動調整する．AP の種類にもよるが，電波は屋内では50m，屋外では100m まで到達可能となる．表\ref{各規格の伝送速度}にIEEE による伝送速度の一覧を示す．\\

% \begin{table}[tb]
% \begin　}
% \caption{各規格の伝送速度}
% \label{各規格の伝送速度}
% \begin{tabular}{c|c} 
% \hline \hline
% 伝送規格 & 伝送速度（Mbps） \\ 
% \hline 
% IEEE802.11b & 11/5.5/2/1 \\
% IEEE802.11a & 54/48/36/24/18/12/9/6 \\
% IEEE802.11g & 54/48/36/24/18/12/11/9/6/5.5/2/1 \\
% \hline
% \end{tabular}
% \end{center}
% \end{table}

% \textgt{SSID}

% 無線LANのインフラストラクチャモードにおいて，１つのAPとそのAPの電波内にいる配下の無線LANクライアントで構成されるネットワークをBSS，複数のBSSで構成される無線LAN のネットワークをESS という．各BSS の識別子はBSSID と呼ばれており，通常はその無線LAN ネットワークのAP のMAC アドレスと同じものになる．ESS の識別子はESSID とよばれており，最大32 文字までの英数字を指定できる．なお，無線LAN では上記SSID が同じもの同士のみ通信することができる．仮に無線LAN の電波が届く範囲内にあり，伝送規格や周波数が同じであったとしてもSSID が異なった場合，無線クライアント同士，無線クライアントとAP 間において通信することはできない．\\


% \textgt{無線LAN接続}

% 無線LAN 接続手順には２つのパターンがある．１つは，パッシブスキャンである．これは，無線端末がAP から定期的にブロードキャストされるビーコンフレームを受信してESSID の確認を行い，認証フェーズへ移行するというものである．ビーコンフレームにはSSID，チャネル，データレートなどが含まれる．もう１つは，アクティブスキャンである．これは，無線端末がAP から一定時間ビーコンを受信できなかった場合，接続を行いたいESSID の情報をブロードキャスト送信してAPからその応答が得られれば認証フェーズへ移行するというものである．\\


\section{情報ネットワークにおける性能評価基準}

\subsection{性能評価量}

シミュレーションにおけるネットワークの性能評価量としては様々なものがある．たとえば，ネットワーク遅延，ジッタ，パケットロス率，スループットなどの要素を基に評価が行われる．以下に各用語を紹介する．


\begin{description}
 \item[遅延]\mbox{}\\
データを送信してから相手のコンピュータに届くまでの時間．遅延には，パケットヘッダを調べどの通信回線に送り出すかを決定する際に発生する時間である処理遅延，通信回線への送信を待つ時間である待ち行列遅延，パケットを通信回線に送り出す時間である伝送遅延，パケットの最後のビットを通信回線の視点から終点まで伝搬させるのに要する時間である伝播遅延がある．
 \item[ジッタ]\mbox{}\\
受信側でのパケットの到着時間のばらつきを示したもの．送信側が一定間隔でパケットを送信した場合でも，あらゆる要素がネットワークに作用し，あるパケットだけが遅延を受けて遅く届く事がある．これをジッタと呼ぶ\cite{kyoukasyo}．
 \item[パケットロス率]\mbox{}\\
パケットロスの起こる頻度．パケットロスとは，データを送信している途中でパケットが消失してしまうこと．原因としては，サーバーや回線の負荷，ルーターなどの中継装置の故障，電波干渉によるデータの損傷などが挙げられる．
 \item[スループット]\mbox{}\\
ホスト間でやり取りされるパケットの転送速度．単位は伝送速度（帯域）と同じbps（Bit Per Second）で表される\cite{kyoukasyo2}．  単位時間あたりの処理能力．影響を与える要素としてエンド・システムのCPU能力，メモリー容量，ディスク性能，インタフェース速度，中継機器の中継性能，フィルタや優先制御などの設定，他のトラフィックによる負荷，中継回線の容量や品質，転送プロトコルのバケット長，ウインドウ・サイズなどが挙げられる．
\end{description} 

\subsection{QoS・QoE}

2.3.1 節では，性能評価量について説明したが，ネットワークの性能は一般的に上
記評価量を含むQoS とQoE の観点から評価される\cite{QoS}．

\subsubsection{QoSとQoE}
QoS（Quality f Service）とは，通信サービスの品質のことであり伝送速度や伝送遅延，それらの揺らぎ，パケットロスなどの数値指標で記述される．QoS を用いてネットワーク性能の良し悪しを表現したり，QoS 保証などの一定性能の確保を約束するサービス名に使われたりする．

QoE（Quality of Experience）とは，ユーザの満足レベルを定量的に示す指標である．この指標は，ネットワーク自体ではなくその上で提供されるIPTV等のアプリケーションサービスの体感品質のことである．たとえば，IPTVサービスの場合映像・音声の品質，チャンネルの切替え・早送り巻戻しなどのスムーズさ，その他使い勝手全般がQoEとなる．
QoS同様，QoEは評価項目を可能な限り数値指標として記述される．QoEは，ユーザ自身があるサービスについて評価を行い，その評価を数値として可視化したものがQoEとなる．QoSはネットワーク性能を，QoEはユーザーの体感品質をそれぞれ対象とする．つまり，QoS は通信事業者やサービス提供者から見たサービス品質の尺度であり，QoE はユーザーから見たサービス品質の尺度となる\cite{QoE}．
\end{comment}

% 自分の内容

　本研究では、提案したネットワークモデルをネットワークシミュレータを用いて構築しシミュレーションを行う。
本章では、2.1節で使用するネットワークシミュレータの説明を行い、2.2節では、ネットワークモデルを構築する際に必要となるネットワークの諸技術を説明する。

\section{ネットワークシミュレータ ns-3}

ns-3\cite{ns3} \cite{ns3text} とは、その前身であるns-2の開発に携わっている主要メンバーにより、オープンソースベース形式のシミュレータである。
ns-3の開発チームには、Tom Henderson主任研究員を筆頭に、副主任研究員としてSumit Roy(ワシントン大学)、George Riley(ジョージア工科大学)、Sally Floyd(カリフォルニア大学バークレイ分校ISCIセンター)など、ネットワークの研究分野において著名な研究者たちが名を連ねている。

